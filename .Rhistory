install.packages("roxygen")
install.packages("roxygen2")
getwd()
setwd("users/eric.ward/documents")
setwd("/users/eric.ward/documents")
d = read.csv("/users/eric.ward/downloads/CSV23937.txt")
dim(d)
names(d)
d$first_release_date[1]
d$release_year = substr(d$first_release_date, 1, 4)
d$release_year
d = read.csv("/users/eric.ward/downloads/CSV23937.txt")
d$release_year = asubstr(d$first_release_date, 1, 4)
d = read.csv("/users/eric.ward/downloads/CSV23937.txt")
d$release_year = substr(d$first_release_date, 1, 4)
names(d)
d$release_year
d = read.csv("/users/eric.ward/downloads/CSV23937.txt")
d$release_year = as.numeric(substr(d$first_release_date, 1, 4))
names(d)
d$release_year
names(d)
head(d)
summary(d$release_location_state)
tot = dplyr::group_by(d, release_location_state, release_year) %>%
summarize(tot = sum(cwt_1st_mark_count,na.rm=T) + sum(cwt_2nd_mark_count,na.rm=T) +
sum(non_cwt_1st_mark_count, na.rm=T) + sum(non_cwt_2nd_mark_count, na.rm=T))
library(dplyr)
tot = group_by(d, release_location_state, release_year) %>%
summarize(tot = sum(cwt_1st_mark_count,na.rm=T) + sum(cwt_2nd_mark_count,na.rm=T) +
sum(non_cwt_1st_mark_count, na.rm=T) + sum(non_cwt_2nd_mark_count, na.rm=T))
tot
tot$release_location_state
tot = group_by(d, release_location_state, release_year) %>%
summarize(tot = sum(cwt_1st_mark_count,na.rm=T) + sum(cwt_2nd_mark_count,na.rm=T) +
sum(non_cwt_1st_mark_count, na.rm=T) + sum(non_cwt_2nd_mark_count, na.rm=T)) %>%
filter(!is.na(release_location_state))
tot$release_location_state
library(ggplot2)
names(tot)
ggplot(aes(x = release_year, y = tot, group = release_location_state))
ggplot(tot, aes(x = release_year, y = tot, group = release_location_state))
ggplot(tot, aes(x = release_year, y = tot, group = release_location_state)) +
geom_area(aes(fill = release_location_state), position = "stack")
names(tot)[which(names(tot)=="release_location_state")] = "Region"
ggplot(tot, aes(x = release_year, y = tot, group = Region)) +
geom_area(aes(fill = Region), position = "stack")
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack")
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
xlab("Release year") + ylab("Millions of Chinook")
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
scale_fill_viridis() +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
library(viridis)
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
scale_fill_viridis() +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
scale_color_viridis() +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
scale_fill_viridis()
names(tot)[which(names(tot)=="release_location_state")] = "Region"
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
scale_color_viridis()
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(aes(fill = Region), position = "stack") +
scale_fill_viridis()
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region)) +
geom_area(position = "stack") +
scale_fill_viridis()
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis()
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack")
?scale_fill_viridis()
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis(discrete=TRUE)
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis(discrete=FALSE)
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis(discrete=TRUE) +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
?scale_fill_viridis
ggplot(tot, aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis(discrete=TRUE, direction=-1) +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
max(tot$release_year)
tot = group_by(d, release_location_state, release_year) %>%
summarize(tot = sum(cwt_1st_mark_count,na.rm=T) + sum(cwt_2nd_mark_count,na.rm=T) +
sum(non_cwt_1st_mark_count, na.rm=T) + sum(non_cwt_2nd_mark_count, na.rm=T)) %>%
filter(!is.na(release_location_state)) %>%
filter(!is.na(release_year))
max(tot$release_year)
tot
names(tot)[which(names(tot)=="release_location_state")] = "Region"
ggplot(tot[tot$release_year < 2016,], aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis(discrete=TRUE, direction=-1) +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
getwd()
pdf("Coastwide_Chinook_releases.pdf")
ggplot(tot[tot$release_year < 2016,], aes(x = release_year, y = tot/1000000, group = Region, fill = Region)) +
geom_area(position = "stack") +
scale_fill_viridis(discrete=TRUE, direction=-1) +
xlab("Release year") + ylab("Millions of Chinook") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
dev.off()
?pdf
tot$year
tot$release_year
min(tot$release_year)
group_by(tot, release_year) %>%
summarize(s = sum(tot))
summarize(s = sum(tot)) %>% as.data.frame()
summarize(s = sum(tot)) %>% as.data.frame
group_by(tot, release_year) %>% summarize(s = sum(tot)) %>% as.data.frame
242246790/356857303
11.5/258642855
11.5*1000000
11.5*1000000 / 258642855
